import { CErc20__factory } from '../typechain';
import { getConfig } from './helper';

const hre = require('hardhat');

const main = async () => {
  await hre.run('compile');

  let config = getConfig(hre.network.name);
  const tokenConfig = config.CErc20.proxys[0];
  const address = tokenConfig.address;
  const implAddr = '0xf70b2473e7808edaea4a5cea95996a9b1843d96c';
  const proxyAdmin = config.ProxyAdmin.address;
  const { ethers } = hre;
  const factory = await ethers.getContractFactory('CErc20');
  const data = factory.interface.encodeFunctionData('initialize', [
    '0xaf88d065e77c8cC2239327C5EDb3A432268e5831',
    '0xBfb69860C91A22A2287df1Ff3Cdf0476c5aab24A',
    '0x8C38b023Afe895296e2598AE111752223185b35c',
    '1000000000000000000',
    'Sumer USDC Deposit',
    'sdrUSDC',
    '6',
    '0x5C85A7Ae2B6d29C38cdF360553F8aCBC4e684c31',
    '1000000000000000000',
  ]);
  // const data =
  // '0xa07eaa06000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda02913000000000000000000000000611375907733d9576907e125fb29704712f0bafa000000000000000000000000d16d4bbe76c873d8a1e499bf2aac91710165e3c90000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000060000000000000000000000005c85a7ae2b6d29c38cdf360553f8acbc4e684c310000000000000000000000000000000000000000000000000de0b6b3a7640000000000000000000000000000000000000000000000000000000000000000001253756d65722055534443204465706f73697400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007736472555344430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000';
  // const data =
  // '0xa07eaa06000000000000000000000000af88d065e77c8cc2239327c5edb3a432268e5831000000000000000000000000bfb69860c91a22a2287df1ff3cdf0476c5aab24a0000000000000000000000008c38b023afe895296e2598ae111752223185b35c0000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000060000000000000000000000005c85a7ae2b6d29c38cdf360553f8acbc4e684c310000000000000000000000000000000000000000000000000de0b6b3a7640000000000000000000000000000000000000000000000000000000000000000001253756d65722055534443204465706f736974000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077364725553444300000000000000000000000000000000000000000000000000';
  console.log(address, implAddr, proxyAdmin, data);
  await hre.run('verify:verify', {
    address,
    contract: 'contracts/proxy/SumerProxy.sol:SumerProxy',
    constructorArguments: [implAddr, proxyAdmin, data],
  });
  console.log('ProxyAdmin:', address);
};

main();
